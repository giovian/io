<form class="prevent-default create-schema">
  <h3>Create schema</h3>
  <div data-type="string">
    <label for="path" markdown=1>File path (extension `.json`)</label>
    <input type="text" autocomplete="off" name="path" required pattern="(.*)(\.json)$" minlength=6 value="asd.json">
    <span markdown=1>Schema file path inside `_data/` folder</span>
  </div>

<!-- SCHEMA INJECT -->
  <div schema-inject></div>

<!-- BUTTONS -->
  <div data-type="button">
    <input type="submit" value="Save">
    <input type="reset">
  </div>
</form>

<!--
          MAIN TEMPLATE
-->
<!-- ANNOTATIONS -->
<template id="template-type">
  <details>
    <summary>Annotations</summary>
    <div data-type="string">
      <label for="title">Title</label>
      <input type="text" autocomplete="off" name="title">
    </div>
    <div data-type="string">
      <label for="description">Description</label>
      <input type="text" autocomplete="off" name="description">
    </div>
    <div data-type="string">
      <label for="placeholder">Placeholder</label>
      <input type="text" autocomplete="off" name="placeholder">
    </div>
    <div data-type="string">
      <label for="tooltip">Tooltip</label>
      <input type="text" autocomplete="off" name="tooltip">
    </div>
    <div data-type="boolean" class="pbz">
      <label for="readOnly">Read only</label>
      <select name="readOnly" class="inline" data-value-type="boolean">
        <option value="false">False</option>
        <option value="true">True</option>
      </select>
    </div>
    <div data-type="boolean">
      <label for="writeOnly">Write only</label>
      <select name="writeOnly" class="inline" data-value-type="boolean">
        <option value="false">False</option>
        <option value="true">True</option>
      </select>
    </div>
  </details>
<!-- TYPE -->
  <div data-type="select">
    <label for="type">Type</label>
    <select name="type" required class="inline">
      <option value="string">String</option>
      <option value="number">Number</option>
      <option value="integer">Integer</option>
      <option value="array">Array</option>
      <option value="object">Object</option>
      <option value="boolean">Boolean</option>
      <option value="null">Null</option>
    </select>
  </div>
<!-- TYPE INJECT -->
  <div type-inject></div>
</template>

<!--
          STRING TEMPLATE
-->
<template id="template-string">
  <div data-type="string">
    <label for="format">Format</label>
    <select name="format" class="inline">
      <option value=""></option>
      <option value="textarea">Textarea</option>
      <option value="color">Color</option>
      <option value="email">Email</option>
      <option value="uri">Uri</option>
      <option value="time">Time</option>
      <option value="date">Date</option>
      <option value="date-time">Date time</option>
      <option value="duration">Duration</option>
    </select>
  </div>
  <details>
    <summary>String length</summary>
    <div data-type="number">
      <label for="minLength">Minimun length</label>
      <input type="number" name="minLength" min="0" step="1" pattern="\d+" data-value-type="number">
      <span>Positive integer</span>
    </div>
    <div data-type="number">
      <label for="maxLength">Maximum length</label>
      <input type="number" name="maxLength" min="0" step="1" pattern="\d+" data-value-type="number" data-value-type-original="number">
      <span>Positive integer</span>
    </div>
  </details>
  <div data-type="string">
    <label for="pattern">Pattern</label>
    <input type="text" autocomplete="off" name="pattern">
    <span>ECMA-262 regular expression</span>
  </div>
</template>

<!--
          NUMBER TEMPLATE
-->
<template id="template-number">
  <div data-type="string">
    <label for="format">Format</label>
    <select name="format" class="inline">
      <option value=""></option>
      <option value="range">Range</option>
    </select>
  </div>
  <details>
    <summary>Numeric range</summary>
    <div data-type="number">
      <label for="minimum">Minimun</label>
      <input type="number" name="minimum" data-value-type="number">
      <span>Inclusive limit</span>
    </div>
    <div data-type="number">
      <label for="maximum">Maximum</label>
      <input type="number" name="maximum" data-value-type="number">
      <span>Inclusive limit</span>
    </div>
    <div data-type="number">
      <label for="exclusiveMinimum">Exclusive minimum</label>
      <input type="number" name="exclusiveMinimum" data-value-type="number">
      <span>Exclusive limit</span>
    </div>
    <div data-type="number">
      <label for="exclusiveMaximum">Exclusive maximum</label>
      <input type="number" name="exclusiveMaximum" data-value-type="number">
      <span>Exclusive limit</span>
    </div>
  </details>
  <div data-type="number">
    <label for="multipleOf">Multiple of</label>
    <input type="number" name="multipleOf" min="0" data-value-type="number">
    <span>Positive</span>
  </div>
  <div data-type="string">
    <label for="units">Units</label>
    <input type="text" autocomplete="off" name="units">
  </div>
</template>

<!--
          INTEGER TEMPLATE
-->
<template id="template-integer">
  <div data-type="string">
    <label for="format">Format</label>
    <select name="format" class="inline">
      <option value=""></option>
      <option value="range">Range</option>
    </select>
  </div>
  <details>
    <summary>Integer range</summary>
    <div data-type="number">
      <label for="minimum">Minimun</label>
      <input type="number" name="minimum" data-value-type="number">
      <span>Inclusive limit</span>
    </div>
    <div data-type="number">
      <label for="maximum">Maximum</label>
      <input type="number" name="maximum" data-value-type="number">
      <span>Inclusive limit</span>
    </div>
    <div data-type="number">
      <label for="exclusiveMinimum">Exclusive minimum</label>
      <input type="number" name="exclusiveMinimum" data-value-type="number">
      <span>Exclusive limit</span>
    </div>
    <div data-type="number">
      <label for="exclusiveMaximum">Exclusive maximum</label>
      <input type="number" name="exclusiveMaximum" data-value-type="number">
      <span>Exclusive limit</span>
    </div>
  </details>
  <div data-type="number">
    <label for="multipleOf">Multiple of</label>
    <input type="number" name="multipleOf" min="0" data-value-type="number">
    <span>Positive</span>
  </div>
  <div data-type="string">
    <label for="units">Units</label>
    <input type="text" autocomplete="off" name="units">
  </div>
</template>

<!--
          ARRAY TEMPLATE
-->
<template id="template-array">
  <details>
    <summary>Items number and uniqueness</summary>
    <div data-type="number">
      <label for="minItems">Min items</label>
      <input type="number" name="minItems" min="0" step="1" pattern="\d+" data-value-type="number">
      <span>Positive integer</span>
    </div>
    <div data-type="number">
      <label for="maxItems">Max items</label>
      <input type="number" name="maxItems" min="0" step="1" pattern="\d+" data-value-type="number">
      <span>Positive integer</span>
    </div>
    <div data-type="boolean">
      <label for="uniqueItems">Unique items</label>
      <select name="uniqueItems" class="inline" data-value-type="boolean">
        <option value="false">False</option>
        <option value="true">True</option>
      </select>
    </div>
  </details>
<!-- ITEMS TYPE -->
  <div data-type="select">
    <label for="items[type]">Items type</label>
    <select name="items[type]" required class="inline">
      <option value="string">String</option>
      <option value="number">Number</option>
      <option value="integer">Integer</option>
      <option value="array">Array</option>
      <option value="object">Object</option>
      <option value="boolean">Boolean</option>
      <option value="null">Null</option>
    </select>
  </div>
<!-- TYPE INJECT -->
  <div items-type-inject></div>
</template>

<!--
          OBJECT TEMPLATE
-->
<template id="template-object">
  <div data-type="array">
    <label>Properties <a href="#array" data-index="0" data-add="array" class="prevent-default">add</a></label>
  </div>
  <div property-inject></div>
  <div data-type="select">
    <label for="required">Required properties</label>
    <select name="required" multiple>
      <option value=""></option>
    </select>
  </div>
</template>

{%- capture api -%}
## Create schema

Form to create a schema, need {% include widgets/github_link.html path='_includes/scripts/form.coffee' %} engine.

**Form**

- `path` string field: required and ends with `.json`
- `[schema-inject]` DIV for annotations and `#template-type` injection
- `data-type="button"` section

**Templates**

- `#template-type`  
  - Annotations
  - Type selector
  - `[type-inject]` for schema injection
- `#template-string`
- `#template-number`
- `#template-array`  
  - `[items-type-inject]` for items type injection
- `#template-object`  
  - `[property-inject]` for property injection with name
{%- endcapture -%}